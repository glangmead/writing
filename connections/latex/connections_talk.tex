\documentclass[12pt]{article}
\usepackage[margin=1in]{geometry}
\usepackage[utf8]{inputenc}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{tikz-cd}
\usepackage{tipa}
\usepackage{graphicx}
\usepackage{float}
\usepackage{hyperref}
\usepackage[numbers]{natbib}
\usepackage{parskip} % removes paragraph indent, adds vertical space
\usepackage{quiver}
\usepackage{mathtools}
\usepackage{tcolorbox}

\graphicspath{ {./img/} }

\bibliographystyle{IEEEtran} % shows URL
\setcitestyle{square,numbers}

%%% Common categories
\newcommand{\tp}{\;\mathrm{type}}
\newcommand{\Hom}{\mathrm{Hom}}
\newcommand{\G}{\Gamma}
\newcommand{\pit}[1]{\prod_{(#1)}} % pi-type
\newcommand{\pitxa}{\pit{x:A}}
\newcommand{\sit}[1]{\sum_{(#1)}} % sigma-type
\newcommand{\ent}{\vdash}
\newcommand{\adj}{\dashv}
\newcommand{\refl}{\ensuremath{\textsf{refl}}}
\newcommand{\ap}{\ensuremath{\textsf{ap}}}
\newcommand{\ind}{\ensuremath{\textsf{ind}}}
\newcommand{\lift}{\ensuremath{\textsf{lift}}}
\newcommand{\inv}{\ensuremath{\textsf{inv}}}
\newcommand{\concat}{\ensuremath{\textsf{concat}}}
\newcommand{\transport}{\ensuremath{\textsf{transport}}}
\renewcommand{\sec}{\ensuremath{\textsf{sec}}}
\newcommand{\retr}{\ensuremath{\textsf{retr}}}
\newcommand{\total}{\ensuremath{\textsf{total}}}
\newcommand{\isequiv}{\ensuremath{\textsf{is\_equiv}}}
\newcommand{\fib}{\ensuremath{\textsf{fib}}}
\newcommand{\id}{\ensuremath{\text{id}}}
\newcommand{\judgeq}{\ensuremath{:\equiv}}
\newcommand{\reflfx}{\ensuremath{\refl_{f(x)}}}
\newcommand{\pathm}{\ensuremath{\mathcal{P}_1 (M)}}
\newcommand{\pp}{\ensuremath{\mathcal{P}_1}}

\newcommand{\rr}{\ensuremath{\mathbb{R}}}
\newcommand{\rrn}{\ensuremath{\mathbb{R}^n}}
\newcommand{\rrm}{\ensuremath{\mathbb{R}^m}}
\newcommand{\rrx}{\ensuremath{\mathbb{R}[x]/x^2}}
\newcommand{\rry}{\ensuremath{\mathbb{R}[y]/y^2}}
\newcommand{\cc}{\ensuremath{\mathbb{C}}}
\newcommand{\nn}{\ensuremath{\mathbb{N}}}
\newcommand{\dd}{\ensuremath{\mathbb{D}}}
\newcommand{\vv}{\ensuremath{\mathbb{V}}}
\newcommand{\cinfty}{\ensuremath{C^{\infty}}}
\newcommand{\smfd}{\textsf{SmoothMfd}}
\newcommand{\calg}{\textsf{CAlg}_{\rr}}
\newcommand{\cart}{\textsf{CartSp}}
\newcommand{\formalcart}{\textsf{FormalCartSp}}
\newcommand{\formalsmoothset}{\textsf{FormalSmoothSet}}
\newcommand{\smoothset}{\textsf{SmoothSet}}
\newcommand{\setcat}{\textsf{Set}}
\newcommand{\psh}[1]{\textsf{Psh}(#1)}
\newcommand{\sh}[1]{\textsf{Sh}(#1)}
\newcommand{\pshcart}{\psh{\cart}}
\newcommand{\rmodal}{\Re}
\newcommand{\imodal}{\Im}
\newcommand{\shape}{\ensuremath{\text{\textesh}}}
\newcommand{\op}[1]{#1^{\textsf{op}}}
\newcommand{\pt}{\mathrm{pt}}
\newcommand{\Aut}{\mathrm{Aut}}
\newcommand{\BAut}{\mathrm{BAut}}
\newcommand{\im}{\mathrm{im}}
\newcommand{\Fin}{\mathrm{Fin}}
\newcommand{\Type}{\mathrm{Type}}
\newcommand{\pinv}{p^{-1}}
\newcommand{\aut}{\mathrm{Aut}}
\newcommand{\diffeo}{\mathrm{Diffeo}}

\newcommand{\bg}{\ensuremath{\textbf{B}G}}
\newcommand{\bgconn}{\ensuremath{\textbf{B}G_{\textsf{conn}}}}
\newcommand{\bgdiff}{\ensuremath{\textbf{B}G_{\textsf{diff}}}}

\newcommand{\gc}[1]{\marginpar{\bf $\leftarrow$ {#1}}}
\newcommand{\commentout}[1]{}
\newcommand{\image}{\mathrm{Image}}
\newcommand{\myfig}[2]{\begin{figure}[h]\caption{#1}\centering\includegraphics[width=0.6\textwidth]{#2}\end{figure}}
%\newcommand{\gc}[1]{}

\newtheorem{mydef}{Definition}
\newtheorem{mythm}{Theorem}
\newtheorem{mylemma}{Lemma}
\newtheorem{myprop}{Proposition}
\newtheorem{myclaim}{Claim}

\title{Connections on principal bundles}
\author{Greg Langmead}

\begin{document}
\maketitle
\begin{abstract}
These notes are intended as a didactic presentation of connections on principal bundles. I assume the reader knows some toplogy, such as the definition of compactness, and the preliminaries of differential geometry such as the definition of smooth manifolds and Lie groups. The goal is to define connections and Chern-Weil theory and then go through the paper by Freed and Hopkins \cite{freed2013chernweil} and finally sketch how we can import all of these ideas into type theory.
\end{abstract}
%\tableofcontents
\section{Introduction}
If you are interested in these notes but worry about whether you have the prerequisites, let me offer two of my favorite resources. First is the book by John Baez and Javier Muniain \cite{baez1994gauge} which is a compact and beautiful introduction to manifolds, connections, and the physics that uses these concepts. I'm still not sure why fate did not put this book in front of me in graduate school, when I was voraciously hunting on an almost daily basis for books just like it.

If, like me, you do even better with recorded lectures, I strongly recommend the playlist of lectures by Frederic Schuller \cite{schullerYoutube2015}. His course is efficient but very precise, and he is a great teacher who offers helpful intuition along the way. The scope is similar to the book by Baez and Muniain: he begins with topology and manifolds, defines connections and curvature, and then gets into physics.

The most complete treatment, with the most proofs, is found in Kobayashi and Nomizu's text \cite{kobayashinomizu}, Volume 1.

We will make a beeline for gauge theory, passing through terrorities that you may need to go deeper into to understand the beeline. Those are:
\begin{enumerate}
    \item Smooth manifolds
    \item Tangent bundles and differential forms
    \item Fiber bundles
    \item Lie groups
    \item Principal bundles
    \item Connections
    \item Holonomy
    \item Curvature
    \item And finally, gauge theory
\end{enumerate}

\section{Geometric intuition}
The 20th century method of capturing curvature is in the following figure, where we slide a tangent vector around a loop on a curved surface.

\myfig{Alexandru Scorpan, ``The Wild World of Four-Manifolds'', 2015}{scorpan_sphere}

The embedding has selected a metric on S2, pulled back from R3. A metric is more strictly structure than a connection. A connection captures this notion of transport without a full metric.

A Rubik's Cube is a discrete version of the sphere, and a discrete version of curvature arises. You can cause pieces to rotate by sending them away by a certain path and bringing them back by another.

\section{Infinitesimal trivialization}
A fiber bundle is a quadruple $(E, p, M, F)$ such that
\begin{enumerate}
    \item $E, M, F$ are smooth manifolds
    \item $p:E\to M$ is a smooth surjective map
    \item $E$ is locally a product with the standard fiber $F$. i.e. there is an atlas of open sets $\{U_i\}$ on $M$ such that we have this commutative diagram
    \[\begin{tikzcd}
        {p^{-1}U_i} && {U_i\times F} \\
        & {U_i}
        \arrow["p", from=1-1, to=2-2]
        \arrow["{\phi_i}", from=1-1, to=1-3]
        \arrow["\cong"', from=1-1, to=1-3]
        \arrow["{\mathrm{pr}_1}"', from=1-3, to=2-2]
    \end{tikzcd}\]
	\item On intersections $U_{ij} = U_i \cap U_j$ the above data gives us a map $\phi_{ij}:U_{ij}\to\diffeo(F)$, satisfying the cocycle condition $\phi_{ij} = \phi_{jk}\circ\phi_{ij}$.
	\item A fast way to say what a vector bundle is is to say $F$ is a vector space and the descent maps factor through $GL(V)$.
\end{enumerate}

The setting for connections is $TE$, the tangent bundle of the total space. Since $E$ sort-of factorizes into $F$ and $M$, the tangent bundle sort-of factorizes into $TF$ and $TM$. 

Consider $Tp$, the derivative of the projection map. What is the kernel? It consists of vectors we can justifiably describe as ``vertical-pointing'', i.e. along the fiber. If that makes intuitive sense to you, you are well on your way to understanding connections.

Let's examine this short exact sequence:
\begin{equation}\label{seq}
    0\to VE\hookrightarrow TE \xrightarrow{Tp} TM\to 0\quad\mathrm{(on\ }E)
\end{equation}
where

A connection in a fiber bundle is a splitting of this sequence, a choice of decomposition at each point of $E$ of $TE$ as the direct sum of $VE$ and $TM$. That's our first waypoint.

We can talk about this splitting in three ways.

\begin{enumerate}
    \item A choice of complementary horizontal subspace of $TE$ at every point, i.e. a bundle $HE$ such that $TE=VE\oplus HE$. The horizontal subspace is isomorphic to $p^* TM$ by dimension-counting.
    
    \item A projection $TE\to VE$. The kernel of this operator is the horizontal subspace. This operator is in fact a 1-form because it takes as input tangent vectors (vector-valued, in fact with values in $VE$). We usually denote a connection 1-form with $\omega\in\Omega^1(E, VE)$. It's a 1-form \emph{upstairs}.
    
    \item A lift. Given $HE$ we can form a lifting map $C:TM\times_M E \to TE$ by using the isomorphism between $H_u E$ and $T_{m} M$. We have $\omega\circ C = 0$ because we lift vectors to horizontal ones.
\end{enumerate}

\myfig{From Rupert Way, ``Introduction to connections on principal fibre bundles'', 2010}{way_horiz_field}

Here's another good picture of the splitting.

\myfig{ibid.}{way_upstairs}

Connections exist. For example on a paracompact manifold we can 
\begin{enumerate}
	\item Create a smooth inner product using a partition of unity
	\item split $HE$ usign orthogonal complement
\end{enumerate}


\section{Transport}
We can parlay the lifting of tangent vectors into the lifting of curves. This is strictly 1-dimensional stuff!

Given a smooth curve $c:[0, 1]\to M$:
\begin{enumerate}
	\item Lift all the tangent vectors of $c$ upstairs, giving a vector field on $p^{-1}(c([0,1]))$
	\item Choose a point $u$ over $c(0)$.
	\item Flow along the vector field (requires a little proof that we can solve this differential equation).
\end{enumerate}

\begin{tcolorbox}
Simple proof using curvature and connection pullbacks: Given a curve in $M$, say $c:(-1, 1)=:I \to M$ where $c(0)=:x$, we can pull back $E$ and its connection to $I$, called $c^*E$. The horizontal distribution must be integrable here since the Lie bracket vanishes on vectors pointing along the same linear subspace. So this connection is flat and we can form the vector field $X$ along $c$ in the base, lift $X$ to a horizontal vector field, then integrate it. Then we can push it back into $E$. This is the lift of $c$ to a horizontal curve (i.e. its tangent vectors are horizontal).
\end{tcolorbox}

Lifting curves provides a map between fibers: parallel transport!

\myfig{Alexandru Scorpan, ``The Wild World of Four-Manifolds'', 2005}{scorpan_transport}

Let \pathm\ be the set of piecewise-smooth curves $[0, 1]\to M$. Let $\pp(M, x, y)$ be paths from $x$ to $y$.

\pathm\ is a groupoid under concatenation of paths (and rescaling back into $[0, 1]$).

$$\transport: (\omega : \Omega_1(E; VE))\to (c: \pp(M,x,y)) \to E_{x} \to E_{y}$$

Some results
\begin{enumerate}
    \item Reversing the curve provides an inverse map. Transport gives an isomorphism on fibers. $$\transport (\omega, c_{\leftarrow}) = \lift (\omega, c_{\rightarrow})^{-1}$$
	\item Given $c:[0,1]\to M$ and $d:[0,1]\to M$ with $c(1) = d(0)$, we can compose the curves and form $c\cdot d$. We have $$\transport (\omega, c\cdot d) = \transport (\omega, d)\circ\transport (\omega, c).$$
    \item Reparameterizing the curve with any piecewise-smooth function $f:[0, 1]\to [0, 1]$ such that $f(0)=0$ and $f(1)=1$ preserves the holonomy map. So we can quotient \pathm\ by such reparameterizations. Baez and Schreiber use paths that slow down near the endpoints instead of piecewise-smooth and reparameterizations called thin homotopies, which sweep out no area (singular differential).
    \item In the case of a loop $f(0)=f(1)=x$, we carve out a subgroup of $\Aut(E_x)$ called the holonomy group, denoted $\Phi(x)$. $$\Phi(x)=\image(\lift(\omega, \{\mathrm{loops}\}) )\subset \Aut(E_x).$$
    \item Restricting to contractible loops gives the \emph{restricted holonomy} group denoted $\Phi_0(x)$. $$\Phi_0(x)=\image(\lift(\omega, \{\mathrm{contractible\ loops}\}) )\subset \Aut(E_x).$$
\end{enumerate}

If we require that holonomy preserve additional structure on $F$ such as a linear structure, or a metric, or a metric + orientation, then we prescribe a subgroup of $\Aut(F)$. Putting the group at the center of the discussion segues us to principal bundles.

\section{In principal bundles}
A principal bundle is a fiber bundle where $F$ is a Lie group, plus more conditions:
\begin{enumerate}
    \item The local trivializations respect the left action of $G$ on itself (equivariant).
    \item $G$ acts freely and transitively on $E$ on the right and $M$ is the quotient of this action: $M=E/G$.
\end{enumerate}

The fibers of $E$ are affine versions of $G$. They lack an identity point. The main example is the set of bases of a vector space. Choosing one basis and associating that to $e\in GL(V)$, we get a diffeomorphism between the bases and $GL(V)$.

The action of an element $g\in G$ on $E$ is to rotate or move each fiber by the same amount.

\myfig{Rupert Way again}{way_gaction}

There is a variable version: imagine choosing a different $g$ at each point, smoothly varying. Morally like a smooth map $M\to G$. These are called \emph{gauge transformations}. This is the group $\Aut(E)$, as any $G$-equivariant automorphism of $E$ that is the identity on $M$ is given by such a transformation.

Given $g$ acting on $E$ via $R_g$ we can take the derivative $TR_g:TE\to TE$. This can push any tangent structures around.

Given a single tangent vector in $E$, we can push it all along its riber with $TR_g$ for all $g\in G$ and get a $G$-invariant vector field on that fiber.

A connection is a horizontal distribution like before, plus the condition that all the $TR_g$ respect the splitting. The horizontal distribution is $G$-invariant.

Not sure what diagram I want yet, here's a crack at it:

% https://q.uiver.app/?q=WzAsMTksWzQsMywiRSJdLFs1LDMsIkUiXSxbNCw0LCJNIl0sWzUsNCwiTSJdLFszLDMsIkciXSxbMywxLCJcXG1hdGhmcmFre2d9Il0sWzMsMiwiVEciXSxbNCwyLCJURSJdLFs1LDIsIlxcY29sb3J7cmVkfVRFIl0sWzIsMiwiXFxjb2xvcntibHVlfVxcR2FtbWEgVEVeRyJdLFsyLDEsIlxcY29sb3J7Ymx1ZX1cXEdhbW1hIFZFXkciXSxbMSwyLCJcXGNvbG9ye2JsdWV9XFxHYW1tYSBIRV5HIl0sWzAsMiwiXFxjb2xvcntibHVlfTAiXSxbMiwwLCJcXGNvbG9ye2JsdWV9MCJdLFs1LDAsIlxcY29sb3J7cmVkfTAiXSxbNSwxLCJcXGNvbG9ye3JlZH1WRSJdLFs2LDIsIlxcY29sb3J7cmVkfUhFIl0sWzcsMiwiXFxjb2xvcntyZWR9MCJdLFs0LDEsIkVcXHRpbWVzXFxtYXRoZnJha3tnfSJdLFswLDEsInQiXSxbMiwzLCJcXG1hdGhybXtpZH0iXSxbMCwyLCJwIiwyXSxbMSwzLCJwIl0sWzQsMCwiXFx0cmlhbmdsZWxlZnRcXCAgXFx0ZXh0e1xcdGV4dHVuZGVyc2NvcmV9Il0sWzYsNF0sWzUsNiwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XSxbNywwXSxbOCwxXSxbMTAsOSwiIiwwLHsiY29sb3VyIjpbMjQwLDg2LDYwXX1dLFs5LDExLCIiLDAseyJjb2xvdXIiOlsyNDAsODYsNjBdfV0sWzEzLDEwLCIiLDAseyJjb2xvdXIiOlsyNDAsODYsNjBdfV0sWzExLDEyLCIiLDAseyJjb2xvdXIiOlsyNDAsODYsNjBdfV0sWzE0LDE1LCIiLDAseyJjb2xvdXIiOlszNjAsOTYsNDZdfV0sWzE1LDgsIiIsMCx7ImNvbG91ciI6WzM2MCw5Niw0Nl19XSxbOCwxNiwiIiwwLHsiY29sb3VyIjpbMzYwLDk2LDQ2XX1dLFsxNiwxNywiIiwwLHsiY29sb3VyIjpbMzYwLDk2LDQ2XX1dLFs1LDEwLCJcXGNvbmciLDJdLFs2LDddLFs3LDhdLFsxNSwxOCwiXFxjb25nIiwyXSxbMTgsNSwiXFxtYXRocm17cHJ9XzIiLDJdLFs4LDE1LCJcXG9tZWdhIiwyLHsiY3VydmUiOjEsImNvbG91ciI6WzM2MCw5Niw0Nl19LFszNjAsOTYsNDYsMV1dLFszLDgsIlg6XFxHYW1tYSBURSIsMix7ImN1cnZlIjoyLCJjb2xvdXIiOlsyNDAsODYsNjBdfSxbMjQwLDg2LDYwLDFdXV0=
\[\begin{tikzcd}
	&& {\color{blue}0} &&& {\color{red}0} \\
	&& {\color{blue}\Gamma VE^G} & {\mathfrak{g}} & {E\times\mathfrak{g}} & {\color{red}VE} \\
	{\color{blue}0} & {\color{blue}\Gamma HE^G} & {\color{blue}\Gamma TE^G} & TG & TE & {\color{red}TE} & {\color{red}HE} & {\color{red}0} \\
	&&& G & E & E \\
	&&&& M & M
	\arrow["t", from=4-5, to=4-6]
	\arrow["{\mathrm{id}}", from=5-5, to=5-6]
	\arrow["p"', from=4-5, to=5-5]
	\arrow["p", from=4-6, to=5-6]
	\arrow["{\triangleleft\  \text{\textunderscore}}", from=4-4, to=4-5]
	\arrow[from=3-4, to=4-4]
	\arrow[hook, from=2-4, to=3-4]
	\arrow[from=3-5, to=4-5]
	\arrow[from=3-6, to=4-6]
	\arrow[color={rgb,255:red,65;green,65;blue,241}, from=2-3, to=3-3]
	\arrow[color={rgb,255:red,65;green,65;blue,241}, from=3-3, to=3-2]
	\arrow[color={rgb,255:red,65;green,65;blue,241}, from=1-3, to=2-3]
	\arrow[color={rgb,255:red,65;green,65;blue,241}, from=3-2, to=3-1]
	\arrow[color={rgb,255:red,230;green,5;blue,5}, from=1-6, to=2-6]
	\arrow[color={rgb,255:red,230;green,5;blue,5}, from=2-6, to=3-6]
	\arrow[color={rgb,255:red,230;green,5;blue,5}, from=3-6, to=3-7]
	\arrow[color={rgb,255:red,230;green,5;blue,5}, from=3-7, to=3-8]
	\arrow["\cong"', from=2-4, to=2-3]
	\arrow[from=3-4, to=3-5]
	\arrow[from=3-5, to=3-6]
	\arrow["\cong"', from=2-6, to=2-5]
	\arrow["{\mathrm{pr}_2}"', from=2-5, to=2-4]
	\arrow["\omega"', color={rgb,255:red,230;green,5;blue,5}, curve={height=6pt}, from=3-6, to=2-6]
	\arrow["{X:\Gamma TE}"', color={rgb,255:red,65;green,65;blue,241}, curve={height=12pt}, from=5-6, to=3-6]
\end{tikzcd}\]

\[\begin{tikzcd}
	{VE\oplus HE} & {VE\oplus HE} \\
	TE & TE \\
	E & E \\
	M & M
	\arrow["{R_g}", from=3-1, to=3-2]
	\arrow["{TR_g}", from=2-1, to=2-2]
	\arrow["\cong"', from=1-1, to=2-1]
	\arrow["\cong", from=1-2, to=2-2]
	\arrow["{TR_g}", from=1-1, to=1-2]
	\arrow["\pi"', from=2-1, to=3-1]
	\arrow["\pi", from=2-2, to=3-2]
	\arrow["p"', from=3-1, to=4-1]
	\arrow["p", from=3-2, to=4-2]
	\arrow["{\mathrm{id}}", from=4-1, to=4-2]
\end{tikzcd}\]

More results:
\begin{enumerate}
    \item $G$ acts on horizontal curves: composing a horizontal curve with the right group action produces another horizontal curve.
    \item Take $u\in E_x$ in the principal bundle $E$ and again consider all horizontal loops. This gives a subgroup of $G$, denoted similarly $\Phi(u)$ with restricted version $\Phi_0(u)$. The type of $u:E$ versus $x:M$ determines the type of the holonomy group we're referring to. $$\Phi(u) = \image(\lift(\omega)(u)).$$
    
	For example, imagine on the sphere if $P$ was the frame bundle. Imagine the connection is the one we implicitly used, which preserves length and angles. Then this image would in fact be contained in $O(2)$ instead of $GL(2)$.
    \item If $M$ is connected, all $\Phi_u$ are conjugate and hence isomorphic.
    \item If $M$ is connected and paracompact, $\Phi_0(u)$ is a connected subgroup of $G$ and a normal subgroup of $\Phi(u)$ and $\Phi(u)/\Phi_0(u)$ is countable. 
    \item If $M$ is connected and paracompact, we can form the subset $E(u)$ of all points joinable to $u$ by horizontal curves. This is a principal bundle with structure group $\Phi(u)$ and there is an induced connection. This is a reduction of the original bundle, licensed by the connection. In the earlier example this would form the $O(2)$ bundle.
    \item Ambrose-Singer Theorem: The Lie algebra of $\Phi_0(u)$ is the span of all elements of $\mathfrak{g}$ of the form $\Omega_v(X, Y)$ for $v\in P(u)$ with $X, Y$ horizontal. Slogan: curvature is infinitesimal holonomy.
\end{enumerate}

There's another moving part now that we can bring in which is the Lie algebra $\mathfrak{g}$ of $G$. This soups up what's going on vertically.
\begin{enumerate}
    \item There is a bijection between $\mathfrak{g}$ and equivariant vertical vector fields over a point $x$. The bijection is given by \gc{do it}
    \item Starting with a vector $v\in T_e E$ at some point, whether vertical, horizontal, or mixture, we can push it all up and down the fiber to extend that to a vector field, by the derivative of the action of $G$, i.e. with $\mathfrak{g}$.
    \item The vertical bundle is trivial.
    \item How $\mathrm{ad}(P)$ appears.\gc{Prop 1.1 Kob-Nom p. 64}
\end{enumerate}

We can move the exact sequence to the base (Atiyah-Bott p.547). Because the base is a quotient by the $G$-action, and because the upstairs constructions are $G$-invariant, there is an equivalent exact sequence on the base that we are splitting. $$0\to \mathrm{ad}(P)\to E/G\to TM\to 0$$

Connections can be pulled back and pushed forward!

\section{Curvature}

On to curvature. In the general context of smooth manifolds, we have the Lie bracket of vector fields, which gives another vector field. The space of vector fields is hence a Lie algebra.

Draw an infinitesimal picture of the bracket at a point. The tips can meet or not meet.

Suppose we have what's called a \emph{distribution}, i.e. a sub-bundle of the tangent bundle. This is an infinitesimal thingie, a subspace at each point. Now suppose we have vector fields that live in the sub-bundle. Will their Lie bracket live there? Let's give some names.
\begin{enumerate}
    \item Let $M$ be a manifold and $p:TM\to M$ its tangent bundle. Let $m=\dim M$.
    \item Let $D\subset TM$ be a distribution, i.e. $D$ is a vector bundle over $M$ and $D_x\subset T_x M$ is a smoothly varying sub-vector space at each point. Let $d=\dim D$.
    \item Let $X$ and $Y$ be two vector fields, i.e. smooth sections of $p$. Suppose $X$ and $Y$ are in vact sections of $D$.
    \item Consider $[X, Y]$. 
\end{enumerate}

A question we ask about distributions is whether they are \emph{integrable} i.e. whether there is a \emph{foliation}, which is like a vector field flow but in the dimension of $D$. A local product structure of $M$ as a product of $\rr^{d} \times \rr^{m-d}$ such that $D$ is the tangent bundle of the $d$-dimensional part at every point.

Whether a distribution can be integrated is a purely local question! Whether we can move from infinitesimal to local. These foliations don't need to extend to anything global such as an embedding. Imagine a line of irrational slope in the torus.

\myfig{Scorpan again}{scorpan_nonflat_loop}

If $D$ \emph{could} be integrated, then our hypothetical vector fields would have to satisfy $[X,Y]\subset D$, since there's a manifold structure and bracketing is closed. So being ``closed under bracket'' is necessary for a distribution to be integrable. It's also sufficient (19th c, see the Wikipedia page for Frobenius' theorem).

Draw a picture where the parallelogram doesn't connect up at the far corner.

In this language, a connection is a horizontal foliation. If we have two horizontal vector fields, will their bracket be horizontal? If so, the horizontal bundle is integrable and you can slide around in there locally and stay horizontal. The connection is said to be \emph{flat}.

More facts:
\begin{enumerate}
\item $\Phi_0(u)=\{u\}$. Contractible loops must live in one leaf of the foliation and return to the same point $u$ in the fiber.
\item Two curves respresenting the same class of $\pi_1(M, x)$ lift to the same holonomy element.
\item Thus we get a map $\pi_1(M, x) \to \Phi(u)\subset G$. 
\item The restricted bundle $P(u)$ is connected and so is a cover of $M$. 
\item If $M$ is simply connected and the connection is flat, then $E$ is trivializable.
\end{enumerate}


Formulas:

$$F(X, Y) = \omega(\lift(X), \lift(Y))$$
$$R^*_g(\omega)$$
Bianchi identity.


\section{Morphisms}
Given $f:P'(M', G') \to P(M, G)$ and a corresponding morphism $G'\to G$ and which is a diffeo on the base, we can push connections forward with the derivative of $f$.
% https://q.uiver.app/?q=WzAsOCxbMCwxLCJQJyJdLFswLDIsIk0nIl0sWzEsMSwiUCJdLFsxLDIsIk0iXSxbMCwwLCJHJyJdLFsxLDAsIkciXSxbMCwzLCJcXEdhbW1hJyJdLFsxLDMsIlxcR2FtbWEiXSxbMCwyXSxbMSwzLCJcXGNvbmciXSxbMCwxXSxbMiwzXSxbNCwwXSxbNSwyXSxbNCw1XSxbNiw3XV0=
\[\begin{tikzcd}
	{G'} & G \\
	{P'} & P \\
	{M'} & M \\
	{\Gamma'} & \Gamma
	\arrow[from=2-1, to=2-2]
	\arrow["\cong", from=3-1, to=3-2]
	\arrow[from=2-1, to=3-1]
	\arrow[from=2-2, to=3-2]
	\arrow[from=1-1, to=2-1]
	\arrow[from=1-2, to=2-2]
	\arrow[from=1-1, to=1-2]
	\arrow[from=4-1, to=4-2]
\end{tikzcd}\]

Given $f:P'(M', G') \to P(M, G)$ and a corresponding \emph{isomorphism} $G'\to G$ and which is a smooth map on the base, we can pull connections back by pulling back the 1-form.
% https://q.uiver.app/?q=WzAsOCxbMCwxLCJQJyJdLFswLDIsIk0nIl0sWzEsMSwiUCJdLFsxLDIsIk0iXSxbMCwwLCJHJyJdLFsxLDAsIkciXSxbMCwzLCJcXEdhbW1hJyJdLFsxLDMsIlxcR2FtbWEiXSxbMCwyXSxbMSwzXSxbMCwxXSxbMiwzXSxbNCwwXSxbNSwyXSxbNCw1LCJcXGNvbmciXSxbNyw2XV0=
\[\begin{tikzcd}
	{G'} & G \\
	{P'} & P \\
	{M'} & M \\
	{\Gamma'} & \Gamma
	\arrow[from=2-1, to=2-2]
	\arrow[from=3-1, to=3-2]
	\arrow[from=2-1, to=3-1]
	\arrow[from=2-2, to=3-2]
	\arrow[from=1-1, to=2-1]
	\arrow[from=1-2, to=2-2]
	\arrow["\cong", from=1-1, to=1-2]
	\arrow[from=4-2, to=4-1]
\end{tikzcd}\]


\section{In terms of downstairs bundles}


\section{Gauge transformations}
Gauge transformations. A gauge transformation is a $G$-equivariant diffeomorphism $P\to P$ that is the identity on $M$. So these act on each fiber separately in a smooth way. You can also see it as a smooth choice of element of $G$ acting on each fiber, but the association with $G$ can only be chosen locally of course.

We can think of GTs as analogous to changes of coordinate chart. Physicists seek theories that are gauge-invariant, i.e. invariant under the group of gauge transformations. This is a giagintic infinite-dimensional space, whose type is morally similar to $M\to G$.

GTs act on connections. At a point they slide the horizontal subspaces up and down, and because they vary point to point, they may add some tilt.

GTs conjugate the curvature by a variable element of $G$. They cannot make a non-flat bundle flat.

The type of connections mod gauge is of paramount importance in physics and in fancy high-powered physics-derived invariants of $M$, such as in Donaldson theory on a 4-manifold, which starts with an $SU(2)$ bundle over $M$ and looks at $\mathcal{A}/\mathcal{G}$.




One last thing you can do with horizontal lifts of vectors is precompose lifting with exterior differentiation upstairs.

$$h:\Gamma(TM)\to \Gamma(HE)$$
$$d:\Omega^\bullet(T^*E)\to \Omega^{\bullet+1}(T^*E)$$
$$d\circ h: \Omega^\bullet(T^*M)\to \Omega^{\bullet+1}(T^*M)$$

$g^{-1}dg$ and such.

Affine. Lie algebra-valued 1-forms.

Classifying space.

Theorems from gauge theory!

Quantum gauge theory.

\bibliography{connections}

\end{document}