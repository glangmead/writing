\documentclass[14pt,aspectratio=169]{beamer}
\usetheme{default}
% something tries to renewcommand these but beamer must break the assumption that they are defined so I am defining them
\newcommand{\labelitemi}{}
\newcommand{\labelitemii}{}
\newcommand{\labelitemiii}{}
\newcommand{\labelitemiv}{}
\renewcommand{\mathrm}[1]{\mathsf{#1}}
\usepackage{greg}
\renewcommand{\defemph}[1]{\alert{#1}}
\useoutertheme[subsection=false]{miniframes}
\useinnertheme{circles}
\setbeamertemplate{navigation symbols}{}
\setbeamercovered{transparent}
\definecolor{cmu_red}{RGB}{176,28,51} % #990000
\definecolor{cmu_dark_grey}{RGB}{70, 70, 70} % #464646
\definecolor{mygrey}{RGB}{100, 100, 100}
\definecolor{steveblue}{RGB}{51, 51, 172}
\usecolortheme[named=cmu_red]{structure}
\setbeamercolor{palette secondary}{bg=steveblue,fg=white}
\setbeamercolor{palette tertiary}{bg=steveblue,fg=white}
\setbeamercolor{section in head/foot}{bg=mygrey,fg=white}
\setbeamercolor{alerted text}{fg=cmu_red}

% \setbeamercolor{corollary title}{use=structure,fg=white,bg=structure.fg!75!black}
% \setbeamercolor{corollary body}{parent=normal text,use=block title,bg=blue}
%\setlength{\parskip}{\baselineskip} 

\commentout{
The thesis reads like this:
The type of torsors and Eilenberg-Mac Lane spaces is the background in HoTT of our theory. 
Manifolds are simplicial complexes, made into pushouts in an obvious way, with hubs and spokes.
Extending a map from the k-skel to the (k+1)-skel is called a connection.
Extending a map to a single face is a flatness structure.
Focus on 2-dimensions, oriented, tangent bundles:
Vector fields! Sections on the 1-skel.
Vector fields do the ice cream scoop thing to paths.
Index on a face: swirling after factoring in the flatness.
Flatness and index on two faces.
}

\title[Geometry in HoTT]{DRAFT: Discrete differential geometry in homotopy type theory}
\author{Greg Langmead}
\institute[CMU]{Carnegie Mellon University}
\logo{\vspace{-4pt}\includegraphics[width=100pt]{figs/cmu-wordmark-horizontal-r.pdf}\quad}
\date{April 2025}

\begin{document}
\begin{frame}
\titlepage
\end{frame}

% \begin{frame}
% \tableofcontents
% \end{frame}

\section{Motivation}

\begin{frame}{Motivation}
To use HoTT to study \alert{connections} and \alert{explain} their applicability to algebraic topology, via
\begin{itemize}
\item the Gauss-Bonnet theorem
\item its vast generalization, Chern-Weil theory
\end{itemize}
\end{frame}

\begin{frame}
\begin{theorem}[Gauss-Bonnet]
Let \( M \) be a compact 2-manifold without boundary, equipped with a Riemannian metric. Let \( K \) be the Gaussian curvature of \( M \) and let \( \chi(M) \) be the Euler characteristic. Then \[\frac{1}{2\pi}\int_M K\,dA=\chi(M).\]
\end{theorem}
\end{frame}

\begin{frame}
\vspace{10pt}\begin{theorem}[PoincarÃ©-Hopf]
Let \( M \) be a compact smooth manifold without boundary. Let \( X \) be a vector field on \( M \) with isolated zeroes \( x_1,\ldots,x_n \). Then \[\sum_{i=1}^{n} \mathsf{index}_{x_i}=\chi(M).\]
\end{theorem}
\vspace{-40pt}
% RADIAL OUTWARD
\begingroup
\colorlet{veccol}{cmu_red}
\colorlet{myblue}{blue!60!black}
\tikzstyle{vector}=[->,thick,veccol,style={-{Stealth[scale=0.9]}}]
\pgfmathsetmacro{\R}{1}%
\pgfmathsetmacro{\r}{0.03}%
\pgfmathsetmacro{\N}{8}%
\pgfmathsetmacro{\ang}{60}%
\pgfmathsetmacro{\RR}{0.5}%
\[
% zero
\onslide<1->{
\begin{tikzpicture}
  \fill[myblue] (0,0) circle (\r);
  \foreach \x/\y in {-1/0,-1/1,0/1,1/1,1/0,-1/-1,0/-1,1/-1}{
    \draw[vector] (\x*0.5*\R,\y*0.5*\R) ++ (\ang-180:\R/2) --++ (\ang:\R);
  }
  \node at (0,-1.35*\R) {index 0};
\end{tikzpicture}}
\onslide<1->{
% outward
\begin{tikzpicture}
  \fill[myblue] (0,0) circle (\r);
  \foreach \i [evaluate={\ang=\i*360/\N;}] in {0,...,\N}{
    \draw[vector] (\ang:0.1*\R) --++ (\ang:\R);
  }
  \node at (0,-1.35*\R) {index +1};
\end{tikzpicture}
% inward
\begin{tikzpicture}
  \fill[myblue] (0,0) circle (\r);
  \foreach \i [evaluate={\ang=\i*360/\N;}] in {0,...,\N}{
    \draw[vector] (\ang:1.1*\R) -- (\ang:0.1*\R);
  }
  \node at (0,-1.35*\R) {index +1};
\end{tikzpicture}
% counterclock
\begin{tikzpicture}
  \fill[myblue] (0,0) circle (\r);
  \foreach \R in {0.44,0.88}{
    \foreach \i [evaluate={\ang=\i*360/\N;}] in {1,...,\N}{
      \draw[vector] (\ang:\R) --++ (\ang+90:\RR);
    }
  }
  \node at (0,-1.3*\R) {index +1};
\end{tikzpicture}
% clockwise
\begin{tikzpicture}
  \fill[myblue] (0,0) circle (\r);
  \foreach \R in {0.44,0.88}{
    \foreach \i [evaluate={\ang=\i*360/\N;}] in {1,...,\N}{
      \draw[vector] (\ang:\R) --++ (\ang-90:\RR);
    }
  }
  \node at (0,-1.3*\R) {index +1};
\end{tikzpicture}}
\onslide<1->{
% minus one
\pgfmathsetmacro{\r}{0.03}%
\pgfmathsetmacro{\N}{20}%
\pgfmathsetmacro{\ang}{10}%
\begin{tikzpicture}
  \fill[myblue] (0,0) circle (\r);
  \foreach \R in {0.88}{
    \foreach \i [evaluate={\ang=\i*360/\N;}] in {1,...,\N}{
      \draw[vector] (\ang:\R) --++ (-\ang-90:\RR);
    }
  }
  \node at (0,-1.3*\R) {index --1};
\end{tikzpicture}}
\]
\endgroup
% \includegraphics[width=420pt]{figs/needham_indexes.pdf}
\end{frame}

% \begin{frame}
% I was guided by these pseudo-methods:
% \begin{itemize}
% \item<2-> Infinitesimals are not core to differential geometry
% \item<3-> The action on paths \( \ap f \) is the derivative of \( f \)
% \item<4-> HoTT transport is parallel transport
% \end{itemize}
% \onslide<5->{and therefore}
% \begin{itemize}
% \item<6-> A connection is a derivative of a classifying map: a choice of connection on a bundle \( P:M\to\uni \) is a choice of action on paths
% \end{itemize}
% \onslide<7->{How can this be? The derivative of \( f \) is calculated from the data of \( f \), it's not a free choice!}
% \end{frame}

\begin{frame}{Plan}
\begin{itemize}
\item Manifolds
\item Classifying maps
\item Connections and curvature
\item Theorems
\end{itemize}
\end{frame}

\begin{frame}{HoTT background}
\begin{enumerate}
\item Bezem,~M., Buchholtz,~U., Cagne,~P., Dundas,~B.~I., and Grayson,~D.~R.,
  (2021-) Symmetry. \url{https://github.com/UniMath/SymmetryBook}.

\item Buchholtz,~U., Christensen,~J.~D. , Flaten,~J.~G.~T., and Rijke,~E. (2023) Central
  H-spaces and banded types. arXiv:2301.02636

\item Scoccola,~L. (2020) Nilpotent types and fracture squares in homotopy type theory, MSCS 30(5). arXiv:1903.03245
\end{enumerate}
\end{frame}

\section{Discrete manifolds}

\begin{frame}{Discrete manifolds in HoTT}
\begin{itemize}
\item Recall the classical theory of \alert{simplicial complexes}
\item Define a \alert{realization} procedure to construct types
\end{itemize}
\end{frame}

\begin{frame}{Simplicial complexes}
\begin{mydef}
An \defemph{abstract simplicial complex \( M \) of dimension \( n \)} is an ordered list of sets \( M\defeq[M_0,\ldots,M_n] \) consisting of 
\begin{itemize}
\item a set \( M_0 \) of \( (n+1) \) vertices
\item sets \( M_k \) of subsets of \( M_0 \) of cardinality \( k+1 \)
\item downward closed: if \( F\in M_k \) and \( G\subseteq F \), \( |G|=j+1 \) then \( G\in M_j \)
\end{itemize}
We call the truncated list \( M_{\leq k}\defeq [M_0,\ldots,M_k] \) \alert{the \( k \)-skeleton of \( M \)}.
\end{mydef}
\end{frame}

\begin{frame}{Simplicial complexes}
\begin{example}
The \defemph{complete simplex of dimension \( n \)}, denoted \alert{\( P(n), \)} is the set \( \{1,\ldots,n+1\} \) and its power set. The \( (n-1) \)-skeleton \( P(n)_{\leq (n-1)} \) is denoted \alert{\( \partial P(n) \)} and will serve as a combinatorial \( (n-1) \)-sphere.
\end{example}
e.g., \( P(2) \) is
\begin{tikzpicture}[baseline=3mm]
\tikzset{oo/.style={circle, scale=0.25, fill=black}}
\node[oo, label=left:\( 1 \)] at (-0.7, 0) (a) {};
\node[oo, label=right:\( 2 \)] at  (0, 1) (b) {};
\node[oo, label=right:\( 3 \)] at  (0.7, 0) (c) {};
\draw[fill=blue!95!black,fill opacity=0.1] (-0.7, 0)--(0, 1)--(0.7, 0)--(a);
\end{tikzpicture}, 
\( \partial P(2) \) is
\begin{tikzpicture}[baseline=3mm]
\tikzset{oo/.style={circle, scale=0.25, fill=black}}
\node[oo, label=left:\( 1 \)] at (-0.7, 0) (a) {};
\node[oo, label=right:\( 2 \)] at  (0, 1) (b) {};
\node[oo, label=right:\( 3 \)] at  (0.7, 0) (c) {};
\draw (a) -- (b);
\draw (b) -- (c);
\draw (c) -- (a);
\end{tikzpicture}
\end{frame}

\begin{frame}{Simplicial complexes}
\begin{columns}
\begin{column}{0.5\textwidth}
\!\!\!\!\!\vspace{-0.5cm}\resizebox{220pt}{!}{
\begin{tikzpicture}[scale=0.1]
\input{figs/hasse_octahedron_tikz.tex}
\end{tikzpicture}%
}
\resizebox{90pt}{!}{%
\input{figs/discrete_gauge_theory_oo_tikz}
}
\quad
\includegraphics[width=60pt]{figs/hungarian_cube.pdf}
\end{column}
\begin{column}{0.5\textwidth}
Here is a \alert{Hasse diagram} of an abstract octahedron (vertices named for the colors on a Hungarian Cube)
\end{column}
\end{columns}
\end{frame}

\begin{frame}{Homotopy realization: dimension 0}
We will \alert{realize} simplicial complexes as pushouts.

The realization of a 0-dimensional complex \( M_0 \) is the set \( M_0 \).

In particular the 0-sphere \( \partial\Delta^1\defeq \partial P(1) \).
\end{frame}

\begin{frame}{Homotopy realization: dimension 1}
For a 1-dim complex \( M\defeq [M_0,M_1] \) form
\[\input{figs/realization_dim1_tikz.tex}
\]
\[\{\{w\}, \{g\}\}\leftarrow \{\{w, g\}\}\times\{0, 1\}\to \{\{w, g\}\}\]
\end{frame}

% \begin{frame}{Homotopy realization}
% \vspace{5pt}\begin{definition}
% An \defemph{\( n \)-gon} \( \ccc(n) \) is the realization of a complex \( C(n) \):
% \begin{align*}
% C(n)_0 &= \{v_1,\ldots,v_n\} \\
% C(n)_1 &= \{e_1=\{v_1,v_2\}, \ldots, e_{n-1}=\{v_{n-1}, v_n\}, e_n=\{v_n, v_0\}\}
% \end{align*}
% \end{definition}
% \vspace{-15pt}Toss in two non-complexes \vspace{-20pt}
% \[ \ccc(1)\defeq S^1,\quad \ccc(2)\defeq \begin{tikzpicture}[scale=0.5, baseline=3.5mm]
% \tikzset{arrow/.style={-{Stealth[scale=1.1]}}}
% \tikzset{oo/.style={circle, scale=0.25, fill=black}}
% \tikzset{ooo/.style={circle, scale=0.25, fill=none}}
% \node[oo, label=above:\( v_1 \)] (V1) at (0, 2) {};
% \node[oo, label=below:\( v_2 \)] (V2) at (0, 0) {};
% \node[ooo] (V21) at (0.3, 1.75) {};
% \node[ooo] (V22) at (0.3, 0.25) {};
% \draw (V1) edge[bend right=60, swap, "\( \ell_{12} \)"] (V2);
% \draw (V1) edge[bend left=60, "\( r_{21} \)"] (V2);
% \end{tikzpicture}\]
% %We sometimes denote a polygon with vertices \( \{a, b, c\} \) with \( \gr{abc} \), its realization with \( \hgr{abc} \).
% \end{frame}

\begin{frame}{Homotopy realization: dimension 1}
Next construct a 1-sphere \( \partial\Delta^2\defeq \)
\begin{tikzpicture}[baseline=3mm, scale=0.7]
\tikzset{oo/.style={circle, scale=0.25, fill=black}}
\node[oo, label=left:\( a \)] at (-0.7, 0) (a) {};
\node[oo, label=right:\( b \)] at  (0, 1) (b) {};
\node[oo, label=right:\( c \)] at  (0.7, 0) (c) {};
\draw (a) -- (b);
\draw (b) -- (c);
\draw (c) -- (a);
\end{tikzpicture}:
\[% https://q.uiver.app/#q=WzAsNCxbMSwwLCJcXHBhcnRpYWwgUCgyKV8xIl0sWzEsMSwiXFxwYXJ0aWFsXFxEZWx0YV4yIl0sWzAsMCwiXFxwYXJ0aWFsIFAoMilfMVxcdGltZXMgXFxwYXJ0aWFsXFxEZWx0YV4wIl0sWzAsMSwiXFxwYXJ0aWFsIFAoMilfMCJdLFsyLDBdLFsyLDNdLFszLDFdLFswLDFdLFsxLDIsIiIsMSx7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXItaW52ZXJzZSJ9fV1d
\begin{tikzcd}[ampersand replacement=\&]
  {\partial P(2)_1\times \partial\Delta^1} \& {\partial P(2)_1} \\
  {\partial P(2)_0} \& {\partial\Delta^2}
  \arrow[from=1-1, to=1-2]
  \arrow[from=1-1, to=2-1]
  \arrow[from=1-2, to=2-2]
  \arrow[from=2-1, to=2-2]
  \arrow["\ulcorner"{pos=-0, rotate=180}, draw=none, from=2-2, to=1-1]
\end{tikzcd}\]
\[% https://q.uiver.app/#q=WzAsNCxbMSwwLCJcXHtcXHthLCBiXFx9LCBcXHtiLCBjXFx9LCBcXHtjLCBhXFx9XFx9Il0sWzEsMSwiXFxwYXJ0aWFsXFxEZWx0YV4yIl0sWzAsMCwiXFx7XFx7YSwgYlxcfSwgXFx7YiwgY1xcfSwgXFx7YywgYVxcfVxcfVxcdGltZXMgXFx7MCwgMVxcfSJdLFswLDEsIlxce1xce2FcXH0sIFxce2JcXH0sIFxce2NcXH1cXH0iXSxbMiwwXSxbMiwzXSxbMywxXSxbMCwxXSxbMSwyLCIiLDEseyJzdHlsZSI6eyJuYW1lIjoiY29ybmVyLWludmVyc2UifX1dXQ==
\begin{tikzcd}[ampersand replacement=\&, column sep=small]
  {\{\{a, b\}, \{b, c\}, \{c, a\}\}\times \{0, 1\}} \& {\{\{a, b\}, \{b, c\}, \{c, a\}\}} \\
  {\{\{a\}, \{b\}, \{c\}\}} \& {\partial\Delta^2}
  \arrow[from=1-1, to=1-2]
  \arrow[from=1-1, to=2-1]
  \arrow[from=1-2, to=2-2]
  \arrow[from=2-1, to=2-2]
  \arrow["\ulcorner"{pos=-0, rotate=180}, draw=none, from=2-2, to=1-1]
\end{tikzcd}\]
\end{frame}

\begin{frame}{Homotopy realization: dimension 2}
To realize \( M\defeq[M_0, M_1, M_2] \) use \(  \partial\Delta^1, \partial\Delta^2 \):
\[\input{figs/realization_dim2_alt_tikz.tex}\]
\end{frame}



% \begin{frame}{Homotopy realization}
% \begin{lemma}
% \( \ccc(2)\simeq \ccc(1) \) and in general \( \ccc(n)\simeq\ccc(n-1) \).
% \end{lemma}
% \begin{corollary}
% All \( n \)-gons are equivalent to \( S^1 \).
% \end{corollary}
% \end{frame}

% \begin{frame}{Homotopy realization}
% \( *_{\mm_1}, *_{\mm_2} \) provide \alert{hubs}. \( h_1, h_2 \) provide \alert{spokes}.
% \[\input{figs/realization_dim2_alt_tikz.tex}\]
% \end{frame}


\begin{frame}{Homotopy realization}
\begin{columns}
\begin{column}{0.5\textwidth}
\input{figs/link_tikz.tex}
\end{column}
\begin{column}{0.5\textwidth}
The \defemph{link} of a vertex \( v \) in a 2-complex is the polygon of edges not containing \( v \) but whose union with \( v \) is a face.\\~\\

This will be our model of the \alert{tangent space}.
\end{column}
\end{columns}
\end{frame}

\begin{frame}{Smoothness}
\begin{theorem}[Whitehead (1940)]
Every smooth \( n \)-manifold has a compatible structure of a \alert{combinatorial manifold}: a simplicial complex of dimension \( n \) such that the link is a combinatorial \( (n-1) \)-sphere, i.e. its geometric realization is an \( (n-1) \)-sphere.
\end{theorem}
\url{https://ncatlab.org/nlab/show/triangulation+theorem}
\end{frame}

\section{Torsors}

\begin{frame}
What type families \( \mm\to\uni \) will we consider? Families of torsors, called \alert{principal bundles}.
\end{frame}

\begin{frame}{Torsors}
\begin{definition}
\begin{itemize}
\item Let \( G \) be a group with identity element \( e \).
\item A \defemph{\( G \)-set} is a set \( X \) equipped with a homomorphism \( \phi:(G,e)\to\Aut(X) \).
\item If we have a proof of
\[ 
\mathsf{is\underscore torsor}(X,\phi)\defeq ||X||_{-1}\times \pit{x:X}\mathsf{is\underscore equiv}(\phi(-,x))
\] we say \( (X,\phi) \) is a \defemph{\( G \)-torsor}. Denote the type of \( G \)-torsors by \alert{\( BG \)}.
\item Let \( \reg{G} \) be the \( G \)-torsor consisting of \( G \) acting on itself on the right.
\end{itemize}
\end{definition}
\end{frame}

\begin{frame}{Facts}
\begin{itemize}
\item \( \loopy(BG,\reg{G}) \simeq G \) and composition of loops corresponds to multiplication in \( G \).
\item \( BG \) is connected.
\item Previous 2 \( \implies \) \( BG \) is a \( \K(G,1) \).
\item \( \ev(e):(\reg{G}=_{BG} X)\to X \) is an equivalence.
\item See the Buchholtz et. al. H-spaces paper for more.
\end{itemize}
\end{frame}

\begin{frame}{A connected component of \( \uni \)?}
\begin{definition}
The \alert{type of Eilenberg-Mac Lane spaces \( \EM(G,n) \)} is the connected component of \( \K(G,n) \):
\[ \EM(G,n)\defeq \BAut(\K(G,n))\defeq \sit{Y:\uni}||Y\simeq \K(G,n)||_{-1} \]
\end{definition}
It is a property of a map \( f:A\to\EM(G,n) \) to factor through \( \K(G,n+1) \). See the Scoccola paper.
\end{frame}

\begin{frame}{Coincidences of 2 dimensions}
\begin{itemize}
\item \( S^1 \) is a \( \Kzo \) since \( \loopy(S^1, \base)\simeq \zz \).
\item So \( \EMzo \) is a type of \alert{mere circles}.
\item But \( S^1=_{\EMzo}S^1 \) contains an order 2 \alert{flip}, so \( \not\simeq S^1 \).
\item For a map \( f:A\to\EMzo \) to factor through  \( \Kzt \), it must somehow avoid flips.
\item This deserves to be called \alert{orientability}.
\item \( \link:\mm_0\to\EMzo \) is a great starting point.
\end{itemize}
\end{frame}


\section{Connections and curvature}

\begin{frame}{What we hope to capture and explain}
  \( \vcenter{\hbox{\includegraphics[width=30mm]{figs/curved_cube/curved_cube1}}} \!\!\to\!\! \)
  \( \vcenter{\hbox{\includegraphics[width=30mm]{figs/curved_cube/curved_cube2}}}\!\!\to\!\! \)
  \( \vcenter{\hbox{\includegraphics[width=30mm]{figs/curved_cube/curved_cube3}}}\!\!\to\!\! \)
  \( \vcenter{\hbox{\includegraphics[width=30mm]{figs/curved_cube/curved_cube4}}}\!\!\to\!\! \)
  \( \vcenter{\hbox{\includegraphics[width=30mm]{figs/curved_cube/curved_cube5}}}\!\!\to\!\! \)
  \( \vcenter{\hbox{\includegraphics[width=30mm]{figs/curved_cube/curved_cube6}}}\!\!\to\!\! \)
  \( \vcenter{\hbox{\includegraphics[width=30mm]{figs/curved_cube/curved_cube7}}}\!\!\to\!\! \)
  \( \vcenter{\hbox{\includegraphics[width=30mm]{figs/curved_cube/curved_cube8}}} \)
\end{frame}

\begin{frame}{\( T:\mm\to\EMzo \) extending \( \link \)}
We define \( T \) on edges by imaginging \alert{tipping}:

\begingroup
\tikzset{every picture/.style={scale=0.85}}
\input{figs/discrete_gauge_theory_oo_transport_tikz}
\endgroup
\( \tr(\partial(wbr)):Tw=Tw \) is clockwise rotation by one notch.

We define \( T \) on the face \( wbr \) by the shortest homotopy \( T(wbr):\id=\tr(\partial(wbr)) \).
\end{frame}

% \begin{frame}{Rotation}
% Let \( R:\gr{abcd}\to\gr{abcd} \) send \( a\mapsto b , b\mapsto c , c\mapsto d, d\mapsto a \). \\~\\
% 
% Extend \( R \) to edges.
% 
% \begin{lemma}
% \( \hgr{R}:\hgr{abcd}\to\hgr{abcd} \) is homotopic to the identity, i.e. we have \( \pit{x:\hgr{abcd}}x=\hgr{R}(x) \).
% \end{lemma}
% \begin{proof}
% Use edges.
% \end{proof}
% \end{frame}

\begin{frame}
\begin{definition}
If \( \mm\defeq \mm_0\xrightarrow[]{\imath_0}\cdots\xrightarrow[]{\imath_{n-1}}\mm_n \) is a realization and all the triangles commute in the diagram:\vspace{-10pt}
\[\begin{tikzcd}[ampersand replacement=\&, column sep=small]
  {\mm_0} \& {\mm_1} \& {\mm_2} \& \cdots \& {\mm_n} \\
\&\& {\mathcal{U}}
\arrow["{\imath_0}", from=1-1, to=1-2]
\arrow["{f_0}", from=1-1, to=2-3]
\arrow["{\imath_1}", from=1-2, to=1-3]
\arrow["{f_1}", from=1-2, to=2-3]
\arrow["{\imath_2}", from=1-3, to=1-4]
\arrow["{f_2}", from=1-3, to=2-3]
\arrow["{\imath_{n-1}}", from=1-4, to=1-5]
\arrow["f_n"', from=1-5, to=2-3]
\end{tikzcd}\]\vspace{-15pt}
\begin{itemize}
\item The map \( f_k \) is a \defemph{\( k \)-bundle} on \( \mm \).
\item The pair given by the map \( f_k \) and the proof \( f_k\circ \imath_{k-1}=f_{k-1} \), i.e. that \( f_k \) extends \( f_{k-1} \) is called a \defemph{\( k \)-connection on the \( (k-1) \)-bundle \( f_{k-1} \)}.
\end{itemize}
\end{definition}
\end{frame}

\begin{frame}
\begin{mydef}[cont.]
\[\begin{tikzcd}[ampersand replacement=\&, column sep=small]
  {M_k\times \partial\Delta^k} \& {M_k} \\
  {\mathbb{M}_{k-1}} \& {\mathbb{M}_k} \\
  \& {\mathcal{U}}
  \arrow["{\mathrm{pr}_1}", from=1-1, to=1-2]
  \arrow["{\mathbb{A}_{k-1}}"', from=1-1, to=2-1]
  \arrow["{*_{\mathbb{M}_k}}", from=1-2, to=2-2]
  \arrow["{h_k}", shorten <=10pt, shorten >=10pt, Rightarrow, from=2-1, to=1-2]
  \arrow["{\imath_{k-1}}", from=2-1, to=2-2]
  \arrow[""{name=0, anchor=center, inner sep=0}, "{f_{k-1}}"', from=2-1, to=3-2]
  \arrow["\ulcorner"{pos=-0.05, rotate=180}, shift left=1.5, draw=none, from=2-2, to=1-1]
  \arrow["{f_k}", from=2-2, to=3-2]
\end{tikzcd}
\begin{tikzcd}[ampersand replacement=\&]
  {\{F\}\times \partial\Delta^2} \& \unit \\
  {\mathbb{M}_{k-1}} \& {\mathcal{U}}
  \arrow["{!}", from=1-1, to=1-2]
  \arrow["{\mathbb{A}_{k-1}}"', from=1-1, to=2-1]
  \arrow["{*_{\mathbb{M}_k}}", from=1-2, to=2-2]
  \arrow["{\flat_F}", shorten <=11pt, shorten >=11pt, Rightarrow, from=1-2, to=2-1]
  \arrow[from=2-1, to=2-2]
\end{tikzcd}\]
the filler \( \flat_F \) is called a \defemph{flatness structure for the face \( F \)}, and its ending path (the holonomy around the boundary) is called \defemph{the \( k \)-curvature at the face \( F \)}.
\end{mydef}
\end{frame}
\begin{frame}
With these definitions we have now achieved one of our main goals.

Without a definition of Euler characterisitc we can't prove Gauss-Bonnet.

But once we add vector fields there is a lot more to say.
\end{frame}

\section{Vector fields}
\begin{frame}{Vector fields}
\begin{columns}
\begin{column}{0.7\textwidth}
Let \( T:\mm_2\to\Kzt \) be an oriented tangent bundle on a 2-dim cellular type
\begin{itemize}
\item A \alert{vector field} is a term \alert{\( X:\pit{m:\mm_1}Tm \)}.
\item It's a \alert{nonvanishing} vector field on the 1-skeleton.
\item We model classical zeros by omitting the faces.
\end{itemize}
\end{column}
\begin{column}{0.3\textwidth}
\input{figs/discrete_gauge_theory_oo_swirl}
\end{column}
\end{columns}
\end{frame}

\begin{frame}{Pathovers}
\begin{columns}
\begin{column}{0.55\textwidth}
\includegraphics[width=30ex]{figs/pathovers.pdf}
\end{column}
\begin{column}{0.45\textwidth}
\begin{itemize}
\item Recall pathovers (dependent paths).
\item There is an asymmetry: we pick a fiber to display it.
\item Dependent functions map paths to pathovers (\( \apd \)).
\end{itemize}
\end{column}
\end{columns}
\end{frame}

\begin{frame}{Building up a triangle-over}
\begin{tikzcd}[ampersand replacement=\&, row sep=small]
  {T_1} \& {T_2} \& {T_3} \& {T_1} \\
  \&\&\& {T_{13}T_{32}T_{21}X_1} \\
  \&\& {T_{32}T_{21}X_1} \& {T_{13}T_{32}X_2} \\
  \& {T_{21}X_1} \& {T_{32}X_2} \& {T_{13}X_3} \\
  {X_1} \& {X_2} \& {X_3} \& {X_1}
  \arrow["{T_{21}}", from=1-1, to=1-2]
  \arrow["{T_{32}}", from=1-2, to=1-3]
  \arrow["{T_{13}}", from=1-3, to=1-4]
  \arrow["{\alert{T_{13}T_{32}X_{12}}:}", equals, from=3-4, to=2-4]
  \arrow["{\alert{X_{12}}:}"', equals, from=4-2, to=5-2]
  \arrow["{\alert{T_{32}X_{12}}:}", equals, from=4-3, to=3-3]
  \arrow["{\alert{T_{13}X_{23}}:}", equals, from=4-4, to=3-4]
  \arrow["{\alert{X_{23}}:}", equals, from=5-3, to=4-3]
  \arrow["{\alert{X_{31}}:}", equals, from=5-4, to=4-4]
\end{tikzcd}
\end{frame}

\begin{frame}
\begin{columns}
\begin{column}{0.65\textwidth}
\vspace{12pt}
\begingroup
\tikzset{every picture/.style={scale=0.85}}
\input{figs/face_swirl_tikz.tex}
\endgroup
\end{column}
\begin{column}{0.35\textwidth}
\begin{itemize}
\item \( \partial F\defeq e_{12}\cdot e_{23}\cdot e_{31}.  \)
\item \( \tr \) thins out arrows.
\item \( X \) on a path is drawn in the path's color.
\item \( X(\partial F) \) traces 3 sides of a square.
\end{itemize}
\end{column}
\end{columns}
\end{frame}

\begin{frame}{Angle}
\begin{columns}
\begin{column}{0.3\textwidth}
\input{figs/discrete_gauge_theory_oo_swirl}
\end{column}
\begin{column}{0.7\textwidth}
\begin{itemize}
\item We want to extract from each \( X_{ij} \) just the \alert{angle}, a non-dependent quantity.
\item e.g. in this example: 3 copies of ``+1 notch'' and 3 of ``--1 notch.''
\item The total swirled angle is 0.
\end{itemize}
\end{column}
\end{columns}
\end{frame}

\begin{frame}{Angle}
\onslide<1->{Observation 1: Use the torsor structure. If we choose \( m:\mm \) then \( T_m=T_m \) acts on all fibers. We can define subtraction \( T_i\times T_i\to(T_m=T_m) \).}

\onslide<2->{Observation 2: Use the vector field. Given \( X_i:T_i \) we can form subtraction \( -X_i:T_i\to (T_m=T_m) \). \( X_{ij}-X_j:T_{ji}X_i-X_j=_{T_m=T_m}0 \).}

\onslide<3->{Observation 3: Use \( \ap \) of addition. We can add \( \alpha:a=_{\ccc(4)}0 \) and \( \beta:b=_{\ccc(4)}0 \) to form \( \alpha+\beta:(a+b)=_{\ccc(4)}0 \).}

\onslide<4->{Together these remove the dependency. We can compute \( \flat, I, X \) on each face independently and total them in \( T_m=T_m \).}
\end{frame}

\begin{frame}
\begin{lemma}
If \( G \) is a higher group with multiplication \( \mu:G\times G\to G \) and proof of commutativity \( \mathsf{is\underscore comm}:\pit{a,b:G}\mu(a, b)=\mu(b, a) \) then \( \mu \) induces a function \( \mu_=:(x=_G y)\times (x'=_G y')\to (\mu(x, x')=_G\mu(y,y')) \).
\end{lemma}
\begin{proof}
If \( p:x=_G y \) and \( p':x'=_G y' \), then we can define \( \mu_=(p, p') \) by concatenating the three paths 
\begin{align*} 
\mu(x',p)&:\mu(x', x)=_G\mu(x', y)\\
\mathsf{is\underscore comm}(x',y)&:\mu(x',y)=_G\mu(y,x')\\
\mu(y, p')&:\mu(y, x')=_G\mu(y, y').\qedhere
\end{align*}
\end{proof}
\end{frame}

\begin{frame}
\[\begin{aligned}
\tr_F&\defeq \tr(\partial F)&&:T_1=_{\Kzt}T_1&&\text{\alert{holonomy}}\\
\flat_F&\defeq \flat(\partial F)&&:\id=_{T_1=T_1}\tr_F&&\text{\alert{flatness}}\\
X_F&\defeq X(\partial F)&&:\tr_F(X_1)=_{T_1}X_1&&\text{\alert{swirling}}\\
\end{aligned}\]
\onslide<2->{
\begin{columns}[c]
\begin{column}{0.7\textwidth}
\begin{mydef}
The \defemph{index of the vector field \( X \) on the face \( F \)} is the integer \( I^X_F\defeq\loopy(\flat_F(X_1)\cdot X_F):\loopy(X_1=_{T_1}X_1) \).
\end{mydef}
\end{column}
\begin{column}{0.3\textwidth}
\begin{tikzpicture}
  [arrow/.style={-{Stealth[scale=1.1]}}, .style={scale=0.7}]
  \tikzset{oo/.style={circle, scale=0.6, fill=black}}
  \tikzset{ii/.style={circle, scale=0.3, fill=gray}}
  \setlength{\mylen}{2cm}
  \setlength{\mylin}{1cm}
  \node[label=center:\( Tv_1 \)] (V1) at (0, 0) {};
  \node [ii, above right=\mylin of V1,  label=right:\( v_{11} \)] (V11) {};
  \node [ii, below right=\mylin of V1,  label=right:\( v_{12} \)] (V12) {};
  \node [ii, below left=\mylin of  V1,  label=left:\( v_{13} \)] (V13) {};
  \node [ii, above left= \mylin of V1,  label=left: \( v_{14} \)] (V14) {};

  \draw[dashed] (V11) edge[ultra thick, solid, arrow, swap, "\( \flat_F(X_1) \)"] (V14);
  \draw[arrow] (V14) edge[thick, swap, color=magenta, "\( X_{12} \)"] (V13);
  \draw[arrow] (V13) edge[thick, swap, color=teal, "\( X_{23} \)"] (V12);
  \draw[arrow] (V12) edge[thick, swap, color=blue, "\( X_{31} \)"] (V11);
\end{tikzpicture}
\end{column}
\end{columns}}
\end{frame}

\section{Results}

% \begin{frame}
% How do we make these happen?
% \begin{align*}
% \sum_F \flat_F &\leftrightsquigarrow \int_M K\,dA  \\
% \sum_F I^X_F &\leftrightsquigarrow  \sum_{i=1}^{n} \mathsf{index}_{x_i} \\
% ? &\leftrightsquigarrow \frac{1}{2\pi}\int_M K\,dA - \sum_{i=1}^{n} \mathsf{index}_{x_i} = 0 
% \end{align*}
% \end{frame}

\begin{frame}
\begin{itemize}
\item On a single face we have \( I^X_F=\loopy(\flat_F(X_1)\cdot X_F) \).
\item Map \( \flat_F(X_1) \) and \( X_F \) to angles in \( T_m=T_m \).
\item Sum over faces can be performed in \( T_m=T_m \).
\item Assume that each edge is traversed twice, once in each direction.
\item Prove that the total angle \( \sum_F X_F=0 \).
\item Leaving us \( I_\mathrm{tot}=\loopy(\flat_{\mathrm{tot}}) \).
\end{itemize}
\end{frame}

\begin{frame}{Classical proof}
\begin{columns}
\column{0.5\textwidth}
\vspace{12pt}
\begin{figure}
\includegraphics[width=0.9\textwidth]{figs/needham_triangle_circ.pdf}
\caption{{Needham,~T. (2021) Visual Differential Geometry and Forms.}}
\end{figure}
\column{0.5\textwidth}
\vspace{-12pt}
\begin{itemize}
\item The classical proof is discrete-flavored.
\item ``\( \angle Fw_{||} \)'' looked a lot like a pathover.
\item Hopf's \( \Phi \) is defined on edges, not loops. We imitated that too.
\end{itemize}
\end{columns}
\end{frame}


\begin{frame}
Thank you.
\end{frame}

\end{document}
