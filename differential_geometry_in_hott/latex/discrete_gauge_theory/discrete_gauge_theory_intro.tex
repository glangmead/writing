\section{Overview}

We will define 
\begin{itemize}
\item combinatorial 2-manifolds
\item circle bundles, and principal circle bundles of tangent bundles
\item vector fields,
\end{itemize}
and then observe emerging from those definitions the presence of
\begin{itemize}
\item connections
\item curvature
\item the index of a vector field,
\end{itemize}
and \added[id=Greg]{attempt to} prove
\begin{itemize}
\item the Gauss-Bonnet theorem
\item and the Poincaré-Hopf theorem.
\end{itemize}

We will consider functions \( M\to \EM(\zz,1) \) where \( \EM(\zz,1) \) is the connected component in the universe of the Eilenberg-MacLane space \( \K(\zz,1) \) which we will take to be \( \so \), and where \( M \) is a combinatorial manifold of dimension 2, which is a simplicial complex encoded in a higher inductive type, such that each vertex has a neighborhood that looks like a disk with a discrete circle boundary (i.e. a polygon). We can call terms \( C:\EM(\zz,1) \) ``mere circles.''

We will see in Section~\ref{sec:polygons} that \( \EM(\zz,1) \) contains all the polygons. We will construct a map \( \link:M\to\EM(\zz,1) \) that maps each vertex to the polygon consisting of its neighbors. Then we can consider the type of pointed mere circles \( \EMp(\zz,1)\defeq \sit{Y:\EM(\zz,1)}Y \) as well as the first projection that forgets the point. This is a univalent fibration (univalent fibrations are always equivalent to a projection of a type of pointed types to some connected component of the universe\cite{christensen_univalence}). If we form the pullback
% https://q.uiver.app/#q=WzAsNCxbMCwwLCJQXFxzdGFja3JlbHtcXG1hdGhybXtkZWZ9fXs9fVxcc3VtX3tDOlRNfUMiXSxbMSwwLCJcXG1hdGhybXtFTX1fXFxidWxsZXQoXFxtYXRoYmJ7Wn0sMSkiXSxbMSwxLCJcXG1hdGhybXtFTX0oXFxtYXRoYmJ7Wn0sMSkiXSxbMCwxLCJNIl0sWzAsMywiXFxtYXRocm17cHJ9XzEiLDJdLFsxLDIsIlxcbWF0aHJte3ByfV8xIiwyXSxbMCwxLCJcXG92ZXJsaW5le1R9Il0sWzMsMiwiVCJdLFswLDIsIiIsMSx7InN0eWxlIjp7Im5hbWUiOiJjb3JuZXIifX1dXQ==
\begin{center}
\begin{tikzcd}[cramped]
  {P} & {\mathrm{EM}_\bullet(\mathbb{Z},1)} \\
  M & {\mathrm{EM}(\mathbb{Z},1)}
  \arrow["", from=1-1, to=1-2]
  \arrow["{\mathrm{pr}_1}"', from=1-1, to=2-1]
  \arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
  \arrow["{\mathrm{pr}_1}"', from=1-2, to=2-2]
  \arrow["{\mathsf{link}}", from=2-1, to=2-2]
\end{tikzcd}
\end{center}
then we have a bundle of mere circles, with total space given by the \( \sit{} \)-type construction. We will show that this is not a principal bundle, i.e. a bundle of torsors. Torsors are types with the additional structure of a group action. But if \( \link  \) satisfies an additional property (amounting to an orientation) then the pullback is a principal fibration, i.e. \( \link \) factors through a map \( \K(\zz,2)\to\EMzo \), where \( \K(\zz,2) \) is an Eilenberg-Mac Lane space. 

We will argue that extending \( \link \) to a function \( T \) on paths can be thought of as constructing a connection, notably one that is not necessarily flat (trivial). Moreover, lifting \( T \) to \( T_\bullet:M\to\EMp(\zz,1) \) can be thought of as a nonvanishing vector field. There will in general not be a total lift, just a partial function. The domain of \( T_\bullet \) will have a boundary of circles, and the degree (winding number) on the disjoint union of these can be thought of as the index of \( T_\bullet \). We can then examine the total curvature and the total index and prove that they are equal, and argue that they are equal to the usual Euler characteristic. This will simultaneously prove the Poincaré-Hopf theorem and Gauss-Bonnet theorem in 2 dimensions, for combinatorial manifolds. This is similar to the classical proof of Hopf\cite{hopf}, presented in detail in Needham\cite{needham}.

\subsection{Future work}
The results of this note can be extended in many directions. There are higher-dimensional generalizations of Gauss-Bonnet, including the theory of characteristic classes and Chern-Weil theory (which links characteristic classes to connections and curvature). These would involve working with nonabelian groups like \( SO(n) \) and sphere bundles. Results from gauge theory could be imported into HoTT, as well as results from surgery theory and other topological constructions that may be especially amenable to this discrete setting. Relationships with computer graphics and discrete differential geometry\cite{crane_ddg}\cite{crane_connections} could be explored. Finally, a theory that reintroduces smoothness could allow more formal versions of the analogies explored here. 
