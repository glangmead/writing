\section{The total construction}
\label{sec:totals}
We will place holonomy, flatness, and vector fields on the same footing, and combine them. We will prove the equivalance of the total curvature of a tangent bundle, and total index of a vector field. This is the key relationship in proving both the Gauss-Bonnet theorem and the Poincar√©-Hopf theorem.

\subsection{Index of the vector field}
\begin{myprop}
\label{prop:eveq}
Given a polygon \( \ccc(n):\Kzt \) and a point \( b:\ccc(n) \) the evaluation map \( \ev(b):\ccc(n)=_{\Kzt}\ccc(n))\to \ccc(n) \) is an equivalence.
\end{myprop}
\begin{myproof}
See \cite{buchholtz2023central}.
\end{myproof}

Consider a 2-dimensional simplicial complex \( M \), its 2-dimensional realization \( \mm=\mm_0\to\mm_1\to\mm_2 \). Consider a face \( F:M_2 \), with \( m:\mm \) a vertex of \( F \) and \( \partial F:\partial\Delta^2\to\mm \) the boundary loop of the face. We have accumulated the following constructions:
\[\begin{aligned}
\tr_F&\defeq \tr(\partial F)&&:Tm=Tm\\
\flat_F&\defeq \flat(\partial F)&&:\id=_{Tm=Tm}\tr(\partial F)\\
X_F&\defeq X(\partial F)&&:\tr(\partial F)(X(m))=_{Tm}X(m).\\
\end{aligned}\]
Define \( \sigma^X_F\defeq\ev(X(m))^{-1}(X_F) \), which is the automorphism of \( Tm \) that performs the same total swirling that \( X_F \) does, giving us
\[\begin{aligned}
\tr_F&:Tm=Tm\\
\flat_F&:\id=_{Tm=Tm}\tr_F\\
\sigma^X_F&:\tr_F=_{Tm=Tm}\id.\\
\end{aligned}\]
These last two can be concatenated to make a loop. We can then obtain an integer by using the fact that \( \loopy_{Tm}(\Kzt)\simeq S^1 \), plus the well known formula \( \loopy(S^1,\base)\simeq\zz \) (e.g. \cite{hottbook} Corollary 8.1.10).
\begin{mydef}
The \defemph{index of the vector field \( X \) around the face \( F \)} is the integer \( I^X_F\defeq\flat_F\cdot \sigma^X_F:\id=_{Tm=Tm}\id \).
\end{mydef}
We now have the following list of ingredients at a single face:
\begin{equation}
\label{eq:face_elements}
\begin{aligned}
\tr_F&:Tm=Tm&&\text{the curvature}\\
\flat_F&:\id=_{Tm=Tm}\tr_F&&\text{the flatness}\\
\sigma^X_F&:\tr_F=_{Tm=Tm}\id&&\text{the swirling}\\
I^X_F&:\id=_{Tm=Tm}\id&&\text{the index}.
\end{aligned}
\end{equation}

\subsection{Total curvature and index on the sphere}
We have seen in Lemma~\ref{lem:multpath} how to sum paths in a commutative group such as \( Tm=Tm \).
\begin{equation}
\label{eq:tot_elements}
\begin{aligned}
\flat_\tot    & \defeq \sum_F\flat_F &&:\id=_{Tm=Tm}\tr_\tot\\
\sigma^X_\tot & \defeq \sum_F\sigma^X_F &&:\tr_\tot=_{Tm=Tm}\id\\
I^X_\tot      & \defeq \sum_F I^X_F &&:\id=_{Tm=Tm}\id.
\end{aligned}
\end{equation}
The assumption that the simplicial complex is oriented\todo{make this assumption!} implies that each edge appears twice when traversing each path \( \partial F \), once in each direction. So Lemma \ref{lem:cancellation} proves the following
\begin{myprop}The total swirling is 0.\label{prop:total_swirling}
\end{myprop}
\begin{myproof}
\(\sum_F\sigma^X_F=\sum_{\mathrm{edge\ }e}\sigma(e)+\sigma(e^{-1})=_{Tm=Tm}\refl_0\)
\end{myproof}
\begin{mythm}The total flatness equals the total index.
\end{mythm}
\begin{myproof}
Follows directly from \( I^X_\tot\defeq\flat_\tot\cdot \sigma^X_\tot \) and Proposition~\ref{prop:total_swirling}.\todo{need another equation about the totals}
\end{myproof}


\subsection{Future directions}
Euler characteristic. Chern-Weil theory. Atiyah bundle. Space of connections is contractible. Formalization.

The results of this note can be extended in many directions. There are higher-dimensional generalizations of Gauss-Bonnet, including the theory of characteristic classes and Chern-Weil theory (which links characteristic classes to connections and curvature). These would involve working with nonabelian groups like \( SO(n) \) and sphere bundles. Results from gauge theory could be imported into HoTT, as well as results from surgery theory and other topological constructions that may be especially amenable to this discrete setting. Relationships with computer graphics and discrete differential geometry\cite{crane_ddg}\cite{crane_connections} could be explored. Finally, a theory that reintroduces smoothness could allow more formal versions of the analogies explored here. 
